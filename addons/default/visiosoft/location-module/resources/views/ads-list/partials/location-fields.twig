<div class="row w-100 px-2 m-0">
    <div class="col-12 px-0 py-1 px-2">
        <b>
            <span class="float-left">{{ trans('visiosoft.module.location::field.address.name') }}</span>
        </b>
        {% set country = setting_value('visiosoft.module.location::default_country') %}
        {% if app.request.get('country') %}
            {% set country =  app.request.get('country') %}
        {% endif %}
        <a href="#" class="a-sahibinden-type selected-country filter-country-btn float-right">
            <small>{{ getCountry(country).name }}</small>
        </a>
        <input name="country" value="{{ country }}" type="hidden">
    </div>
    <div class="col-12 px-0 py-1">
        <button type="button" class="btn btn-default border border-1 w-100 filter-city-btn" data-toggle="modal"
                data-parent="">
            <span class="float-left">{{ trans("visiosoft.module.location::field.city.name") }}</span>
            <i class="fas fa-sort-down float-right"></i>
        </button>
        {% set selected_cities = params.param['city'] %}
        {% set selected_cities_name = [] %}
        {% for selected_city in selected_cities[0]|split(',') %}
            {% set selected_cities_name = selected_cities_name|merge([getCity(selected_city|trim(',')).name]) %}
        {% endfor %}
        <div class="text-muted selected-city">
            <small>{{ selected_cities_name|join(',') }}</small>
        </div>
        <input name="city[]" value="{{ params.param['city']|join(',') }}" type="hidden">
    </div>
    <div class="col-12 px-0 py-1">
        <button type="button" class="btn btn-default border border-1 w-100 filter-district-btn" data-toggle="modal"
                data-parent="">
            <span class="float-left">{{ trans("visiosoft.module.location::field.district.name") }}</span>
            <i class="fas fa-sort-down float-right"></i>
        </button>
        {% set selected_districts = app.request.get('district') %}
        {% set selected_districts_name = [] %}
        {% for selected_district in selected_districts[0]|split(',') %}
            {% set selected_districts_name = selected_districts_name|merge([getDistrict(selected_district|trim(',')).name]) %}
        {% endfor %}
        <div class="text-muted selected-district">
            <small>{{ selected_districts_name|join(',') }}</small>
        </div>
        <input name="district[]" value="{{ app.request.get('district')|join(',') }}" type="hidden">
    </div>
    <div class="col-12 px-0 py-1">
        <button type="button" class="btn btn-default border border-1 w-100 filter-neighborhood-btn" data-toggle="modal"
                data-parent="">
            <span class="float-left">{{ trans("visiosoft.module.location::field.neighborhood.name") }}</span>
            <i class="fas fa-sort-down float-right"></i>
        </button>
        {% set selected_neighborhoods = app.request.get('neighborhood') %}
        {% set selected_neighborhoods_name = [] %}
        {% for selected_neighborhood in selected_neighborhoods[0]|split(',') %}
            {% set selected_neighborhoods_name = selected_neighborhoods_name|merge([getNeighborhood(selected_neighborhood|trim(',')).name]) %}
        {% endfor %}
        <div class="text-muted selected-neighborhood">
            <small>{{ selected_neighborhoods_name|join(',') }}</small>
        </div>
        <input name="neighborhood[]" value="{{ app.request.get('neighborhood')|join(',') }}" type="hidden">
    </div>
    <div class="col-12 px-0 py-1">
        <button type="button" class="btn btn-default border border-1 w-100 filter-village-btn" data-toggle="modal"
                data-parent="">
            <span class="float-left">{{ trans("visiosoft.module.location::field.village.name") }}</span>
            <i class="fas fa-sort-down float-right"></i>
        </button>
        {% set selected_villages = app.request.get('village') %}
        {% set selected_villages_name = [] %}
        {% for selected_village in selected_villages[0]|split(',') %}
            {% set selected_villages_name = selected_villages_name|merge([getVillage(selected_village|trim(',')).name]) %}
        {% endfor %}
        <div class="text-muted selected-village">
            <small>{{ selected_villages_name|join(',') }}</small>
        </div>
        <input name="village[]" value="{{ app.request.get('village')|join(',') }}" type="hidden">
    </div>
</div>

<div class="modal-content position-absolute filter-location-modal" style="z-index: 9999;display: none">
    <div class="modal-header">
        <input type="text" id="searchLocation" class="form-control"
               placeholder="{{ trans('visiosoft.module.location::message.placeholder') }}">
        <button type="button" class="close filter-modal-close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body filter-location-body">
        <div class="loading"></div>
        <ul class="list-unstyled countries"></ul>
        <ul class="list-unstyled cities"></ul>
        <ul class="list-unstyled districts"></ul>
        <ul class="list-unstyled neighborhoods"></ul>
        <ul class="list-unstyled village"></ul>
    </div>
</div>
<div class="filter-location-back" style="display: none"></div>

<script>
    var null_msg = "{{ trans('visiosoft.module.location::message.null_msg') }}!"
</script>
